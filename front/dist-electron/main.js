"use strict";const s=require("electron"),n=require("node:path");process.env.DIST=n.join(__dirname,"../dist");process.env.PUBLIC=s.app.isPackaged?process.env.DIST:n.join(process.env.DIST,"../public");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";let e;const o=process.env.VITE_DEV_SERVER_URL;function r(){e=new s.BrowserWindow({icon:n.join(process.env.PUBLIC,"electron-vite.ico"),webPreferences:{preload:n.join(__dirname,"preload.js")},width:1080,height:625,resizable:!1}),e.webContents.on("did-finish-load",()=>{e==null||e.webContents.send("main-process-message",new Date().toLocaleString())}),o?e.loadURL(o):e.loadFile(n.join(process.env.DIST,"index.html")),e.on("close",i=>{i.preventDefault(),s.dialog.showMessageBox({type:"info",title:"提示",message:"您确定要退出吗",buttons:["确定","取消"]}).then(t=>{t.response===0&&s.app.exit()})})}s.app.on("window-all-closed",()=>{process.platform!=="darwin"&&s.app.quit()});s.app.whenReady().then(r);
